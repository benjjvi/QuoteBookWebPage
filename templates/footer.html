<!-- templates/footer.html -->
<footer class="site-footer">
  <div class="footer-inner">
    <p class="footer-meta">
      © 2026 benjjvi ·
      <a href="{{ url_for('credits') }}">Credits & License</a>
    </p>

    <p id="latest-quote" class="footer-meta" aria-live="polite">
      Well this is awkward. We couldn't load the funnies.
    </p>
  </div>

  <script>
    (async function fetchLatestQuote() {
      const quoteEl = document.getElementById("latest-quote");

      try {
        const res = await fetch("/api/latest");
        if (!res.ok) throw new Error("Bad response");

        const data = await res.json();

        if (data.quote && data.authors && data.authors.length) {
          quoteEl.textContent =
            `Most recent quote: “${data.quote}” — ${data.authors.join(", ")}`;
        } else {
          quoteEl.textContent = "No recent quotes yet.";
        }
      } catch (err) {
        console.error("Failed to fetch latest quote:", err);
        quoteEl.textContent = "Failed to load latest quote.";
      }
    })();
  </script>
</footer>
