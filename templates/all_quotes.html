{% extends "base.html" %} {% block title %}All Quotes{% endblock %} {% block
extra_css %}
<link
  rel="stylesheet"
  href="{{ url_for('static', filename='assets/css/all_quotes.css') }}"
/>
{% endblock %} {% block content %}
<div class="container">
  <div class="top-bar">
    <h1>All Quotes</h1>
    <a href="{{ url_for('index') }}" class="btn">Back home</a>
  </div>

  <form method="get">
    <label for="speaker">Filter by speaker:</label>
    <select name="speaker" id="speaker" onchange="this.form.submit()">
      <option value="">All Speakers</option>
      {% for spk, count in speakers %}
        <option
          value="{{ spk }}"
          {% if spk == selected_speaker %}selected{% endif %}
        >
          {{ spk }} ({{ count }})
        </option>
      {% endfor %}

    </select>
    <noscript><button type="submit">Filter</button></noscript>
  </form>

  {% for q in quotes %}
    <div class="quote-card">
      <div class="quote-text">{{ q.quote }}</div>

      <div class="quote-author">
        â€”
        {{
          [
            q.authors | join(", "),
            q.timestamp | uk_date,
            q.timestamp | uk_time,
            q.context
          ]
          | select
          | join(", ")
        }}
      </div>

      <br />

      <a href="{{ url_for('quote_by_id', quote_id=q.id) }}" class="btn-quote">
        View
      </a>
    </div>
  {% else %}
  <p>No quotes found.</p>
  {% endfor %}

</div>
{% endblock %}
